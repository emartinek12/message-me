<!DOCTYPE html>
  <html>
    <head>
      <title>MessageMe</title>
      <%= favicon_link_tag %>
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <%= csrf_meta_tags %>
      <%= csp_meta_tag %>

      <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
      <%= javascript_importmap_tags %>
      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/semantic-ui@2.5.0/dist/semantic.min.css">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.5.0/dist/semantic.min.js"></script>
      <script>
          scroll_bottom = function() {
            if ($('#messages').length > 0) {
                $('#messages').scrollTop($('#messages')[0].scrollHeight);
            }
          };
          submit_message = function() {
            $('#message_body').on('keydown', function(e) {
                if (e.keyCode == 13) {
                  $('button').click();
                }
            })
          };
          $(document).ready(function () {
              $(".ui.dropdown").dropdown();
              $('.message .close').on('click', function() {
                  $(this).closest('.message').transition('fade');
              });
              submit_message();
              scroll_bottom();
          });
      </script>
    </head>

    <body>
    <div class="ui inverted large menu">
      <div class="ui container">
        <%= render 'layouts/navigation' %>
      </div>
    </div>
    <div class="ui  container">
      <%= render 'layouts/messages' %>
      <%= yield %>
    </div>
  </body>
</html>
